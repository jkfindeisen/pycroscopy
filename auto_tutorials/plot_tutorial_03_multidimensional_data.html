

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial 3: Handling Multidimensional datasets &mdash; pycroscopy 0.59.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pycroscopy 0.59.2 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> pycroscopy
          

          
          </a>

          
            
            
              <div class="version">
                0.59.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">Pycroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_format.html">Pycroscopy Data and File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../papers_conferences.html">Papers / Conferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">Examples &amp; Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html#scientific-data-analysis">Scientific Data Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html#developer-tutorials">Developer Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html#user-tutorials">User Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pycroscopy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial 3: Handling Multidimensional datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_tutorials/plot_tutorial_03_multidimensional_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial-3-handling-multidimensional-datasets">
<span id="sphx-glr-auto-tutorials-plot-tutorial-03-multidimensional-data-py"></span><h1>Tutorial 3: Handling Multidimensional datasets<a class="headerlink" href="#tutorial-3-handling-multidimensional-datasets" title="Permalink to this headline">¶</a></h1>
<p><strong>Suhas Somnath</strong>
8/8/2017</p>
<p>This set of tutorials will serve as examples for developing end-to-end workflows for and using pycroscopy.</p>
<p><strong>In this example, we will learn how to slice multidimensional datasets.</strong></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In pycroscopy, all position dimensions of a dataset are collapsed into the first dimension and all other
(spectroscopic) dimensions are collapsed to the second dimension to form a two dimensional matrix. The ancillary
matrices, namely the spectroscopic indices and values matrix as well as the position indices and values matrices
will be essential for reshaping the data back to its original N dimensional form and for slicing multidimensional
datasets</p>
<p>We highly recommend reading about the pycroscopy data format - available in the docs.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Ensure python 3 compatibility:</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">unicode_literals</span>

<span class="c1"># The package for accessing files in directories, etc.:</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Warning package in case something goes wrong</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>

<span class="c1"># Package for downloading online files:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># This package is not part of anaconda and may need to be installed.</span>
    <span class="kn">import</span> <span class="nn">wget</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;wget not found.  Will install with pip.&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">pip</span>
    <span class="n">pip</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="s1">&#39;wget&#39;</span><span class="p">])</span>
    <span class="kn">import</span> <span class="nn">wget</span>

<span class="c1"># The mathematical computation package:</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># The package used for creating and manipulating HDF5 files:</span>
<span class="kn">import</span> <span class="nn">h5py</span>

<span class="c1"># Packages for plotting:</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="c1"># basic interactive widgets:</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">interact</span>

<span class="c1"># Finally import pycroscopy for certain scientific analysis:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pycroscopy</span> <span class="kn">as</span> <span class="nn">px</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;pycroscopy not found.  Will install with pip.&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">pip</span>
    <span class="n">pip</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="s1">&#39;pycroscopy&#39;</span><span class="p">])</span>
    <span class="kn">import</span> <span class="nn">pycroscopy</span> <span class="kn">as</span> <span class="nn">px</span>
</pre></div>
</div>
</div>
<div class="section" id="load-the-dataset">
<h2>Load the dataset<a class="headerlink" href="#load-the-dataset" title="Permalink to this headline">¶</a></h2>
<p>For this example, we will be working with a Band Excitation Polarization Switching (BEPS)
dataset acquired from advanced atomic force microscopes. In the much simpler Band Excitation (BE)
imaging datasets, a single spectra is acquired at each location in a two dimensional grid of spatial locations.
Thus, BE imaging datasets have two position dimensions (X, Y) and one spectroscopic dimension (frequency - against
which the spectra is recorded). The BEPS dataset used in this example has a spectra for each combination of
three other parameters (DC offset, Field, and Cycle). Thus, this dataset has three new spectral
dimensions in addition to the spectra itself. Hence, this dataset becomes a 2+4 = 6 dimensional dataset</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># download the raw data file from Github:</span>
<span class="n">h5_path</span> <span class="o">=</span> <span class="s1">&#39;temp_3.h5&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/pycroscopy/pycroscopy/cades_dev/data/BEPS_small.h5&#39;</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">h5_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h5_path</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">wget</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">h5_path</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Open the file in read-only mode</span>
<span class="n">h5_file</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">h5_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Datasets and datagroups within the file:</span><span class="se">\n</span><span class="s1">------------------------------------&#39;</span><span class="p">)</span>
<span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">h5_file</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Datasets</span> <span class="ow">and</span> <span class="n">datagroups</span> <span class="n">within</span> <span class="n">the</span> <span class="n">file</span><span class="p">:</span>
<span class="o">------------------------------------</span>
<span class="o">/</span>
<span class="n">Measurement_000</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Bin_FFT</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Bin_Frequencies</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Bin_Indices</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Bin_Step</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Bin_Wfm_Type</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Excitation_Waveform</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Noise_Floor</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Position_Indices</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Position_Values</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Fit</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Guess</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Spectroscopic_Indices</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Spectroscopic_Values</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_000</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Bin_Frequencies</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Mean_Spectrogram</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Spectroscopic_Parameter</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Step_Averaged_Response</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_001</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Bin_Frequencies</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Mean_Spectrogram</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Spectroscopic_Parameter</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Step_Averaged_Response</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spectroscopic_Indices</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Spectroscopic_Values</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">UDVS</span>
<span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">UDVS_Indices</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">h5_meas_grp</span> <span class="o">=</span> <span class="n">h5_file</span><span class="p">[</span><span class="s1">&#39;Measurement_000&#39;</span><span class="p">]</span>
<span class="n">h5_main</span> <span class="o">=</span> <span class="n">h5_meas_grp</span><span class="p">[</span><span class="s1">&#39;Channel_000/Raw_Data&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">The main dataset:</span><span class="se">\n</span><span class="s1">------------------------------------&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_main</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">main</span> <span class="n">dataset</span><span class="p">:</span>
<span class="o">------------------------------------</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Raw_Data&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;c8&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The main dataset clearly does not provide the multidimensional information about the data that will be necessary to
slice the data. For that we need the ancillary datasets that support this main dataset</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># pycroscopy has a convenient function to access datasets linked to a given dataset:</span>
<span class="n">h5_spec_ind</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">getAuxData</span><span class="p">(</span><span class="n">h5_main</span><span class="p">,</span> <span class="s1">&#39;Spectroscopic_Indices&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">h5_spec_val</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">getAuxData</span><span class="p">(</span><span class="n">h5_main</span><span class="p">,</span> <span class="s1">&#39;Spectroscopic_Values&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">h5_pos_ind</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">getAuxData</span><span class="p">(</span><span class="n">h5_main</span><span class="p">,</span> <span class="s1">&#39;Position_Indices&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">h5_pos_val</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">getAuxData</span><span class="p">(</span><span class="n">h5_main</span><span class="p">,</span> <span class="s1">&#39;Position_Values&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="understanding-the-ancillary-datasets">
<h2>Understanding the ancillary datasets:<a class="headerlink" href="#understanding-the-ancillary-datasets" title="Permalink to this headline">¶</a></h2>
<p>The position datasets are shaped as [spatial points, dimension] while the spectroscopic datasets are shaped as
[dimension, spectral points]. Clearly the first axis of the position dataset and the second axis of the spectroscopic
datasets match the corresponding sizes of the main dataset.</p>
<p>Again, the sum of the position and spectroscopic dimensions results in the 6 dimensions originally described above.</p>
<p>Essentially, there is a unique combination of position and spectroscopic parameters for each cell in the two
dimensional main dataset. The interactive widgets below illustrate this point. The first slider represents the
position dimension while the second represents the spectroscopic dimension. Each position index can be decoded
to a set of X and Y indices and values while each spectroscopic index can be decoded into a set of frequency,
dc offset, field, and forc parameters</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Main Datasets of shape:&#39;</span><span class="p">,</span> <span class="n">h5_main</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Position Datasets of shape:&#39;</span><span class="p">,</span> <span class="n">h5_pos_ind</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Spectroscopic Datasets of shape:&#39;</span><span class="p">,</span> <span class="n">h5_spec_ind</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">spec_labels</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_formatted_labels</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="p">)</span>
<span class="n">pos_labels</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_formatted_labels</span><span class="p">(</span><span class="n">h5_pos_ind</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">myfun</span><span class="p">(</span><span class="n">pos_index</span><span class="p">,</span> <span class="n">spec_index</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">dim_ind</span><span class="p">,</span> <span class="n">dim_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pos_labels</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">dim_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">h5_pos_ind</span><span class="p">[</span><span class="n">pos_index</span><span class="p">,</span> <span class="n">dim_ind</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">dim_ind</span><span class="p">,</span> <span class="n">dim_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spec_labels</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">dim_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">h5_spec_ind</span><span class="p">[</span><span class="n">dim_ind</span><span class="p">,</span> <span class="n">spec_index</span><span class="p">])</span>


<span class="n">interact</span><span class="p">(</span><span class="n">myfun</span><span class="p">,</span> <span class="n">pos_index</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h5_main</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">spec_index</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h5_main</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Main</span> <span class="n">Datasets</span> <span class="n">of</span> <span class="n">shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">)</span>
<span class="n">Position</span> <span class="n">Datasets</span> <span class="n">of</span> <span class="n">shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Spectroscopic</span> <span class="n">Datasets</span> <span class="n">of</span> <span class="n">shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">22272</span><span class="p">)</span>
<span class="n">interactive</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">(</span><span class="n">IntSlider</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;pos_index&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">24</span><span class="p">),</span> <span class="n">IntSlider</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">11135</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;spec_index&#39;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">22271</span><span class="p">),</span> <span class="n">Output</span><span class="p">()),</span> <span class="n">_dom_classes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;widget-interact&#39;</span><span class="p">,))</span>
</pre></div>
</div>
</div>
<div class="section" id="visualizing-the-ancillary-datasets">
<h2>Visualizing the ancillary datasets<a class="headerlink" href="#visualizing-the-ancillary-datasets" title="Permalink to this headline">¶</a></h2>
<p>The plots below show how the position and spectroscopic dimensions vary. Due to the high dimensionality of the
spectroscopic dimensions, the variation of each dimension has been plotted separately.</p>
</div>
<div class="section" id="how-we-interpret-these-plots">
<h2>How we interpret these plots:<a class="headerlink" href="#how-we-interpret-these-plots" title="Permalink to this headline">¶</a></h2>
<p><strong>Positions</strong>: For each Y index, the X index ramps up from 0 to 4 and repeats. Essentially, this means that for
a given Y index, there were multiple measurements (different values of X)</p>
<p><strong>Spectroscopic</strong>: The plot for <cite>Cycle</cite> shows that the next fastest dimension, <cite>DC offset</cite>, was varied twice.
Correspondingly, the plot for <cite>DC offset</cite> plot shows that this dimension ramps up from 0 to 63
for each <cite>Cycle</cite> index. The same logic can be extended to the faster varying dimensions - <cite>Frequency</cite> and <cite>Field</cite>.</p>
<p>Note that the spectroscopic and position dimensions may not be arranged from fastest to slowest.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fig_1</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">px</span><span class="o">.</span><span class="n">plot_utils</span><span class="o">.</span><span class="n">plot_line_family</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">h5_pos_ind</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">h5_pos_ind</span><span class="p">[()]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                               <span class="n">line_names</span><span class="o">=</span><span class="n">pos_labels</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Position points&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Position Indices&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">px</span><span class="o">.</span><span class="n">plot_utils</span><span class="o">.</span><span class="n">plot_line_family</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">h5_spec_ind</span><span class="p">,</span>
                               <span class="n">line_names</span><span class="o">=</span><span class="n">spec_labels</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Spectroscopic points&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Spectroscopic Indices&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">fig_2</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="k">for</span> <span class="n">dim_ind</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">dim_label</span><span class="p">,</span> <span class="n">dim_array</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                                               <span class="p">[</span><span class="n">spec_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">spec_labels</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
                                               <span class="p">[</span><span class="n">h5_spec_ind</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="mi">500</span><span class="p">],</span> <span class="n">h5_spec_ind</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">500</span><span class="p">]]):</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_array</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">dim_array</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Spectroscopic points&#39;</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Dim &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dim_ind</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="n">dim_label</span><span class="p">)</span>

<span class="n">rhs_axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
<span class="k">for</span> <span class="n">dim_ind</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">dim_label</span><span class="p">,</span> <span class="n">dim_array</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">rhs_axes</span><span class="p">,</span> <span class="n">spec_labels</span><span class="p">,</span> <span class="n">h5_spec_ind</span><span class="p">):</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dim_array</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">dim_array</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Spectroscopic points&#39;</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Dim &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dim_ind</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="n">dim_label</span><span class="p">)</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><a class="first reference internal image-reference" href="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0011.png"><img alt="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0011.png" src="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0011.png" style="width: 470.0px; height: 235.0px;" /></a>
</li>
<li><a class="first reference internal image-reference" href="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0021.png"><img alt="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0021.png" src="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0021.png" style="width: 705.0px; height: 470.0px;" /></a>
</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># A similar version of this function is available in pycroscopy.io.hdf_utils.get_formatted_labels</span>


<span class="k">def</span> <span class="nf">describe_dimensions</span><span class="p">(</span><span class="n">h5_aux</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">h5_aux</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">),</span>
                          <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">h5_aux</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">)):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;]&#39;</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Position dimension names and units:&#39;</span><span class="p">)</span>
<span class="n">describe_dimensions</span><span class="p">(</span><span class="n">h5_pos_ind</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Spectroscopic dimension names and units:&#39;</span><span class="p">)</span>
<span class="n">describe_dimensions</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Position</span> <span class="n">dimension</span> <span class="n">names</span> <span class="ow">and</span> <span class="n">units</span><span class="p">:</span>
<span class="n">X</span> <span class="p">[</span> <span class="n">m</span> <span class="p">]</span>
<span class="n">Y</span> <span class="p">[</span> <span class="n">m</span> <span class="p">]</span>

<span class="n">Spectroscopic</span> <span class="n">dimension</span> <span class="n">names</span> <span class="ow">and</span> <span class="n">units</span><span class="p">:</span>
<span class="n">Frequency</span> <span class="p">[</span> <span class="n">Hz</span> <span class="p">]</span>
<span class="n">DC_Offset</span> <span class="p">[</span> <span class="n">V</span> <span class="p">]</span>
<span class="n">Field</span> <span class="p">[</span>  <span class="p">]</span>
<span class="n">Cycle</span> <span class="p">[</span>  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="now-lets-find-the-size-in-each-dimension">
<h2>Now lets find the size in each dimension<a class="headerlink" href="#now-lets-find-the-size-in-each-dimension" title="Permalink to this headline">¶</a></h2>
<p>For now lets assume that data is sampled at each position and at each spectral step
In other words lets assume that data was not sampled over a random subset of points within a grid of points</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># The function below has been implemented as pycroscopy.io.hdf_utils.get_dimensionality</span>


<span class="k">def</span> <span class="nf">get_dim_sizes</span><span class="p">(</span><span class="n">ind_dset</span><span class="p">,</span> <span class="n">is_position</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="c1"># ind_dset here is expected to be of the shape [dimension, points] like the spectroscopic indices</span>
    <span class="k">if</span> <span class="n">is_position</span><span class="p">:</span>
        <span class="c1"># Position dimensions will be turned from [points, dimension] to [dimension, points]</span>
        <span class="n">ind_dset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">ind_dset</span><span class="p">[()])</span>

    <span class="n">dim_size</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">ind_dset</span><span class="p">:</span>
        <span class="c1"># For each dimension array, we will find the number of unique elements in it</span>
        <span class="n">dim_size</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">col</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">dim_size</span>


<span class="n">pos_dim_sizes</span> <span class="o">=</span> <span class="n">get_dim_sizes</span><span class="p">(</span><span class="n">h5_pos_ind</span><span class="p">,</span> <span class="n">is_position</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">spec_dim_sizes</span> <span class="o">=</span> <span class="n">get_dim_sizes</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Positions:&#39;</span><span class="p">,</span> <span class="n">pos_dim_sizes</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Spectroscopic:&#39;</span><span class="p">,</span> <span class="n">spec_dim_sizes</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Positions</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">Spectroscopic</span><span class="p">:</span> <span class="p">[</span><span class="mi">87</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="slicing-the-main-dataset">
<h2>Slicing the Main dataset<a class="headerlink" href="#slicing-the-main-dataset" title="Permalink to this headline">¶</a></h2>
<p>Let’s assume that we are interested in visualizing the spectrograms at the first field of the second cycle at
position - row:3 and column 2. There are two ways of accessing the data:</p>
<ol class="arabic simple">
<li>The easiest method - use the PycroDataset class to slice the data</li>
</ol>
<ul class="simple">
<li>This method will only work for <code class="docutils literal"><span class="pre">main</span></code> datasets.  We recommend using method 2 for slicing all others.</li>
</ul>
<ol class="arabic simple" start="2">
<li>The easier method - reshape the data to N dimensions and slice the dataset</li>
</ol>
<ul class="simple">
<li>This approach, while easy, may not be suitable for large datasets which may or may not fit in memory</li>
</ul>
<ol class="arabic simple" start="3">
<li>The hard method - find the spectroscopic and position indices of interest and slice the 2D dataset</li>
</ol>
<div class="section" id="approach-1-using-the-pycrodataset">
<h3>Approach 1 - Using the PycroDataset<a class="headerlink" href="#approach-1-using-the-pycrodataset" title="Permalink to this headline">¶</a></h3>
<p>We will use the new PycroDataset class to create an N dimensional slice  directly from the two dimensional
data in the file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># First we convert from an HDF5 Dataset to a PycroDataset</span>
<span class="n">pd_main</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">PycroDataset</span><span class="p">(</span><span class="n">h5_main</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd_main</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, the data is still two dimensional.  The PycroDataset has several attributes that will help with
the slicing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s check the names and sizes of each dimension</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd_main</span><span class="o">.</span><span class="n">n_dim_labels</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd_main</span><span class="o">.</span><span class="n">n_dim_sizes</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;DC_Offset&#39;</span><span class="p">,</span> <span class="s1">&#39;Field&#39;</span><span class="p">,</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">]</span>
<span class="p">[</span> <span class="mi">5</span>  <span class="mi">5</span> <span class="mi">87</span> <span class="mi">64</span>  <span class="mi">2</span>  <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>With this information, we can now get our data slice.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">slice_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">Y</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Field</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Cycle</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">nd_spec</span><span class="p">,</span> <span class="n">success</span> <span class="o">=</span> <span class="n">pd_main</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">slice_dict</span><span class="o">=</span><span class="n">slice_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">success</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">nd_spec</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="kc">True</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The slice is returned already in the N dimensional form.  We just need to remove all the
dimensions with length one, transpose it like in method 2, and plot.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">spectrogram3</span> <span class="o">=</span> <span class="n">nd_spec</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Now the spectrogram is of order (DC_Offset x frequency)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span> <span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">spectrogram3</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;DC Offset Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Spectrogram Amplitude&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0031.png" class="align-center" src="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0031.png" />
</div>
<div class="section" id="approach-2-n-dimensional-form">
<h3>Approach 2 - N-dimensional form<a class="headerlink" href="#approach-2-n-dimensional-form" title="Permalink to this headline">¶</a></h3>
<p>We will use convenient pycroscopy function that safely reshapes the data to its N dimensional form with a single
line. Note that while this approach appears simple on the surface, there are a fair number of lines of code that
make up this function.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ds_nd</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">reshape_to_Ndims</span><span class="p">(</span><span class="n">h5_main</span><span class="p">,</span> <span class="n">get_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Shape of the N-dimensional dataset:&#39;</span><span class="p">,</span> <span class="n">ds_nd</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">N</span><span class="o">-</span><span class="n">dimensional</span> <span class="n">dataset</span><span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;X&#39;</span> <span class="s1">&#39;Y&#39;</span> <span class="s1">&#39;Frequency&#39;</span> <span class="s1">&#39;DC_Offset&#39;</span> <span class="s1">&#39;Field&#39;</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Now that we have the data in its original N dimensional form, we can easily slice the dataset:</span>
<span class="n">spectrogram2</span> <span class="o">=</span> <span class="n">ds_nd</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Now the spectrogram is of order (frequency x DC_Offset).</span>
<span class="n">spectrogram2</span> <span class="o">=</span> <span class="n">spectrogram2</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Now the spectrogram is of order (DC_Offset x frequency)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span> <span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">spectrogram2</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;DC Offset Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Spectrogram Amplitude&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0041.png" class="align-center" src="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0041.png" />
</div>
<div class="section" id="approach-3-slicing-the-2d-matrix">
<h3>Approach 3 - slicing the 2D matrix<a class="headerlink" href="#approach-3-slicing-the-2d-matrix" title="Permalink to this headline">¶</a></h3>
<p>This approach is hands-on and requires that we be very careful with the indexing and slicing. Nonetheless,
the process is actually fairly intuitive. We rely entirely upon the spectroscopic and position ancillary datasets
to find the indices for slicing the dataset. Unlike the main dataset, the ancillary datasets are very small and
can be stored easily in memory. Once the slicing indices are calculated, we <em>only read the desired portion of
`main` data to memory</em>. Thus the amount of data loaded into memory is only the amount that we absolutely need.
<em>This is the only approach that can be applied to slice very large datasets without overwhelming memory overheads</em>.
The comments for each line explain the entire process comprehensively.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Get only the spectroscopic dimension names:</span>
<span class="n">spec_dim_names</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">)</span>

<span class="c1"># Find the row in the spectroscopic indices that corresponds to the dimensions we want to slice:</span>
<span class="n">cycle_row_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spec_dim_names</span> <span class="o">==</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Find the row corresponding to field in the same way:</span>
<span class="n">field_row_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spec_dim_names</span> <span class="o">==</span> <span class="s1">&#39;Field&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Find all the spectral indices corresponding to the second cycle:</span>
<span class="n">desired_cycle</span> <span class="o">=</span> <span class="n">h5_spec_ind</span><span class="p">[</span><span class="n">cycle_row_ind</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># Do the same to find the spectral indices for the first field:</span>
<span class="n">desired_field</span> <span class="o">=</span> <span class="n">h5_spec_ind</span><span class="p">[</span><span class="n">field_row_ind</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>

<span class="c1"># Now find the indices where the cycle = 1 and the field = 0 using a logical AND statement:</span>
<span class="n">spec_slice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">desired_cycle</span><span class="p">,</span> <span class="n">desired_field</span><span class="p">)</span>

<span class="c1"># We will use the same approach to find the position indices</span>
<span class="c1"># corresponding to the row index of 3 and column index of 2:</span>
<span class="n">pos_dim_names</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">h5_pos_ind</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span><span class="p">)</span>

<span class="n">x_col_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pos_dim_names</span> <span class="o">==</span> <span class="s1">&#39;X&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">y_col_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pos_dim_names</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="n">desired_x</span> <span class="o">=</span> <span class="n">h5_pos_ind</span><span class="p">[:,</span> <span class="n">x_col_ind</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">desired_y</span> <span class="o">=</span> <span class="n">h5_pos_ind</span><span class="p">[:,</span> <span class="n">y_col_ind</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>

<span class="n">pos_slice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">desired_x</span><span class="p">,</span> <span class="n">desired_y</span><span class="p">)</span>

<span class="c1"># Now use the spectroscopic and position slice arrays to slice the 2D dataset:</span>
<span class="n">data_vec</span> <span class="o">=</span> <span class="n">h5_main</span><span class="p">[</span><span class="n">pos_slice</span><span class="p">,</span> <span class="p">:][:,</span> <span class="n">spec_slice</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Sliced data is of shape:&#39;</span><span class="p">,</span> <span class="n">data_vec</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Sliced</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">of</span> <span class="n">shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5568</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the sliced data is effectively one dimensional since the spectroscopic dimensions were flattened to a
single dimension.</p>
<p>Now that we have the data we are interested in, all we need to do is reshape the vector to the expected 2D
spectrogram shape. We still have to be careful about the order of the indices for reshaping the vector to the
2D matrix. Note that in python, we specify the slower axis before the faster axis in the reshape command.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Reshape this dataset to the 2D spectrogram that we desire:</span>

<span class="c1"># For this we need to find the size of the data in the DC_offset and Frequency dimensions:</span>
<span class="n">dc_dim_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spec_dim_names</span> <span class="o">==</span> <span class="s1">&#39;DC_Offset&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># Find the row corresponding to field in the same way:</span>
<span class="n">freq_dim_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spec_dim_names</span> <span class="o">==</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="n">dc_dim_size</span> <span class="o">=</span> <span class="n">spec_dim_sizes</span><span class="p">[</span><span class="n">dc_dim_ind</span><span class="p">]</span>
<span class="n">freq_dim_size</span> <span class="o">=</span> <span class="n">spec_dim_sizes</span><span class="p">[</span><span class="n">freq_dim_ind</span><span class="p">]</span>

<span class="c1"># Since we know that the DC offset varies slower than the frequency, we reshape the</span>
<span class="c1"># the data vector by (dc_dim_size, freq_dim_size)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;We need to reshape the vector by the tuple:&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">dc_dim_size</span><span class="p">,</span> <span class="n">freq_dim_size</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">We</span> <span class="n">need</span> <span class="n">to</span> <span class="n">reshape</span> <span class="n">the</span> <span class="n">vector</span> <span class="n">by</span> <span class="n">the</span> <span class="nb">tuple</span><span class="p">:</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">87</span><span class="p">)</span>
</pre></div>
</div>
<p>The dimensions in the ancillary datasets may or may not be arranged from fastest to slowest even though that is
part of the requirements. We can still account for this. In the event that we don’t know the order in which to
reshape the data vector because we don’t know which dimension varies faster than the other(s), we would need to
sort the dimensions by how fast their indices change. Fortunately, pycroscopy has a function called <cite>px.hdf_utils.
get_sort_order</cite> that does just this. Knowing the sort order, we can easily reshape correctly in an automated manner.
We will do this below</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Sort the spectroscopic dimensions by how fast their indices changes (fastest --&gt; slowest)</span>
<span class="n">spec_sort_order</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_sort_order</span><span class="p">(</span><span class="n">h5_spec_ind</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Spectroscopic dimensions arranged as is:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="n">spec_dim_names</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Dimension indices arranged from fastest to slowest:&#39;</span><span class="p">,</span>
      <span class="n">spec_sort_order</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Dimension names now arranged from fastest to slowest:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="n">spec_dim_names</span><span class="p">[</span><span class="n">spec_sort_order</span><span class="p">])</span>

<span class="k">if</span> <span class="n">spec_sort_order</span><span class="p">[</span><span class="n">dc_dim_ind</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">spec_sort_order</span><span class="p">[</span><span class="n">freq_dim_ind</span><span class="p">]:</span>
    <span class="n">spectrogram_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">dc_dim_size</span><span class="p">,</span> <span class="n">freq_dim_size</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">spectrogram_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">freq_dim_size</span><span class="p">,</span> <span class="n">dc_dim_size</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;We need to reshape the vector by the tuple:&#39;</span><span class="p">,</span> <span class="n">spectrogram_shape</span><span class="p">)</span>

<span class="c1"># Reshaping from 1D to 2D:</span>
<span class="n">spectrogram</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">data_vec</span><span class="p">),</span> <span class="n">spectrogram_shape</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default"><div class="highlight"><pre><span></span><span class="n">Spectroscopic</span> <span class="n">dimensions</span> <span class="n">arranged</span> <span class="k">as</span> <span class="ow">is</span><span class="p">:</span>
 <span class="p">[</span><span class="s1">&#39;Frequency&#39;</span> <span class="s1">&#39;DC_Offset&#39;</span> <span class="s1">&#39;Field&#39;</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">]</span>
<span class="n">Dimension</span> <span class="n">indices</span> <span class="n">arranged</span> <span class="kn">from</span> <span class="nn">fastest</span> <span class="n">to</span> <span class="n">slowest</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">Dimension</span> <span class="n">names</span> <span class="n">now</span> <span class="n">arranged</span> <span class="kn">from</span> <span class="nn">fastest</span> <span class="n">to</span> <span class="n">slowest</span><span class="p">:</span>
 <span class="p">[</span><span class="s1">&#39;Frequency&#39;</span> <span class="s1">&#39;Field&#39;</span> <span class="s1">&#39;DC_Offset&#39;</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">]</span>
<span class="n">We</span> <span class="n">need</span> <span class="n">to</span> <span class="n">reshape</span> <span class="n">the</span> <span class="n">vector</span> <span class="n">by</span> <span class="n">the</span> <span class="nb">tuple</span><span class="p">:</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">87</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that the spectrogram is indeed two dimensional, we can visualize it. This plot should match the one from the first
approach.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Now the spectrogram is of order (DC_Offset x frequency)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span> <span class="n">subplots</span><span class="p">()</span>
<span class="n">axis</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">spectrogram</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;DC Offset Index&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Spectrogram Amplitude&#39;</span><span class="p">)</span>

<span class="c1"># Close and delete the h5_file</span>
<span class="n">h5_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h5_path</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0051.png" class="align-center" src="../_images/sphx_glr_plot_tutorial_03_multidimensional_data_0051.png" />
<p><strong>Total running time of the script:</strong> ( 0 minutes  1.189 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_tutorial_03_multidimensional_data1.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_tutorial_03_multidimensional_data.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_tutorial_03_multidimensional_data1.ipynb" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_tutorial_03_multidimensional_data.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Suhas Somnath, Chris Smith, Stephen Jesse, Numan Laanait.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.59.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>